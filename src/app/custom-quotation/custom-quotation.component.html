<div class="row">
    <div class="col-lg-4 col-md-4 col-sm-6 col-6">
        <form [formGroup]="invoiceForm" class="d-flex align-items-center gap-2">
            <select class="form-select" formControlName="billType" aria-label="Default select example">
                <option value="null">Select Bill Type</option>
                <option value="GST">GST</option>
                <option value="Non-GST">Non-GST</option>
            </select>
            <select class="form-select" formControlName="gstType" aria-label="Default select example">
                <option value="UP">UP</option>
                <option value="Other">Not UP</option>
            </select>
        </form>
    </div>
    <div class="col-lg-3 col-md-3 col-sm-6 col-6">
        <button class="btn btn-sm btn-primary" (click)="downloadPdf()">Download Quotation PDF</button>
    </div>
</div>
<div id="invoice">
    <div class="invoice-container">
        <div class="down-margin">
            <div class="row">
                <div class="col-lg-8">
                    <div class="top-left-text">
                        <h2>Admix Media Pvt. Ltd.</h2>
                        <p>PDN Wali Gali, Basant View, Hathras</p>
                        <p>Uttar Pradesh - 204101</p>
                        <p>Phone No.: +91-7906222929</p>
                        <p>Email Id: admixmediaindia&#64;gmail.com</p>
                        <p>GSTIN: 09AAZCA3162F1ZC</p>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="box-left">
                        <img src="assets/Images/logo.png" alt="AdMix Media">
                    </div>
                </div>
            </div>
            <hr>
            <div class="row">
                <div class="col-lg-12">
                    <div class="est-text">
                        <h3>QUOTATION</h3>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <div class="mid-txt">
                        <div class="name-txt">
                            <h4>Invoice To: </h4>
                            <form [formGroup]="custForm" class="form-container">
                                <div class="form-group">
                                    <input type="text" class="form-control topName-txt" formControlName="custName"
                                        placeholder="Customer Name">
                                </div>

                                <div class="form-group">
                                    <label for="contactNo"><strong>Contact No:</strong></label>
                                    <input type="text" id="contactNo" class="form-control" formControlName="custNumb"
                                        placeholder="Enter contact number">
                                </div>

                                <div class="form-group">
                                    <label for="gstNumber"><strong>GST Number:</strong></label>
                                    <input type="text" id="gstNumber" class="form-control" formControlName="custGST"
                                        placeholder="Enter customer GST" name="custGST">
                                </div>

                                <div class="form-group">
                                    <label for="customerAddress"><strong>Customer Address:</strong></label>
                                    <div class="inline-fields">
                                        <input type="text" id="customerAddressLine1" class="form-control"
                                            formControlName="custAddLine1" placeholder="Address Line 1" name="custAdd1">
                                        <input type="text" class="form-control" formControlName="custAddLine2"
                                            placeholder="Address Line 2" name="custAdd2">
                                    </div>
                                    <input type="text" class="form-control" formControlName="custAddLine3"
                                        placeholder="Address Line 3" name="custAdd3">
                                </div>
                            </form>
                        </div>
                        <div class="bill-number">
                            <h4>Quotation Details</h4>
                            <p><strong>Quotation No.</strong> {{'ADM-'+financialYear+'/'+(160+count)}}</p>
                            <p><strong>Date:</strong> {{currentDate}}</p>
                        </div>
                    </div>
                    <form [formGroup]="invoiceForm">
                        <div class="table-scroll">
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th scope="col"><button class="btn btn-dark" (click)="addRow()">+</button></th>
                                        <th scope="col">Name</th>
                                        <th scope="col">Quantity</th>
                                        <th scope="col">Price/Unit</th>
                                        <th scope="col">GST</th>
                                        <th scope="col">Amount</th>
                                    </tr>
                                </thead>
                                <tbody formArrayName="rows">
                                    <tr *ngFor="let row of rows.controls; let i = index" [formGroupName]="i">
                                        <td>{{i + 1}}</td>
                                        <td>
                                            <select class="form-select" formControlName="invoiceCateg"
                                                aria-label="Default select example"
                                                *ngIf="row.get('invoiceCateg')?.value !== 'Other'">
                                                <option value="null">Select Category</option>
                                                <option *ngFor="let category of Category"
                                                    [value]="category.categoryName">{{category.categoryName}}</option>
                                                <option value="Other">Other</option>
                                            </select>
                                            <div *ngIf="row.get('invoiceCateg')?.value === 'Other'"
                                                class="otherCategory">
                                                <textarea formControlName="customCateg" cols="50"
                                                    placeholder="enter"></textarea>
                                            </div>
                                        </td>
                                        <td><input type="number" class="form-control" formControlName="numOfVideos"
                                                placeholder="Enter Number of Videos" name="qty"></td>
                                        <td class="inline-elements">
                                            &#8377; <input type="number" class="form-control"
                                                formControlName="priceOfVideos" placeholder="Enter Price of Videos"
                                                name="rate">
                                        </td>
                                        <td>&#8377;{{row.get('gst')?.value}} (18%)</td>
                                        <td>&#8377; {{row.get('amt')?.value}}</td>
                                    </tr>
                                </tbody>
                                <tfoot>
                                    <tr class="table-group-divider">
                                        <td><b>Total</b></td>
                                        <td></td>
                                        <td><b>{{totalNumOfVideoss}}</b></td>
                                        <td></td>
                                        <td><b>&#8377;{{gstAmount}}</b></td>
                                        <td><b>&#8377;{{totalAmount}}</b></td>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
                    </form>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-9">
                    <div class="est-amt">
                        <div>
                            <span>Note:</span>
                            <textarea class="bottom-txt"></textarea>
                        </div>
                        <p><strong>Invoice Amount in Words</strong></p>
                        <p>{{wordsAmt | uppercase}} ONLY</p>
                        <p *ngIf="isAdrunVisible()"><strong>Terms and Condition</strong></p>
                        <div *ngIf="isMetaAdsVisible()">
                            <ul>
                                <li>
                                            <strong>Payment & Refund Policy:</strong> Deal amount is final once
                                            confirmed. Advance
                                            payments are strictly
                                            non-refundable. Clients must read and agree before closing the deal.
                                        </li>
                            </ul>
                        </div>
                        <div *ngIf="isWebDevelopmentVisible()">
                            <section aria-labelledby="package-includes" style="margin-top:18px;">
                                <div class="section-title">
                                    <h2 id="package-includes">Package Includes:</h2>
                                </div>

                                <ul class="features" aria-label="Package features">
                                    <li><span class="ok">✅</span> 4 Pages (Home, About Us, Contact Us, Products)</li>
                                    <li *ngIf="isIntroductionWebsite"><span class="ok">✅</span> 15 Products Listing</li>
                                    <li><span class="ok">✅</span> 1 Year Free Hosting</li>
                                    <li><span class="ok">✅</span> Mobile Responsive Design</li>
                                    <li><span class="ok">✅</span> Basic SEO Setup</li>
                                    <li><span class="no">❌</span> Domain charges not included (charged separately)</li>
                                </ul>
                            </section>

                            <section aria-labelledby="payment-terms" style="margin-top:16px;">
                                <div class="section-title">
                                    <h2 id="payment-terms">Payment Terms</h2>
                                </div>
                                <div>
                                    <ul>
                                        <li contenteditable="true">70% Advance Payment (Before Development Start)</li>
                                        <li contenteditable="true">30% On Completion of Development</li>
                                    </ul>
                                </div>
                            </section>

                            <section aria-labelledby="additional-notes" style="margin-top:12px;">
                                <div class="section-title">
                                    <h2 id="additional-notes">Additional Notes</h2>
                                </div>
                                <div class="notes">
                                    <ul>
                                        <li>Domain charges depend on the extension you choose (.com, .in, etc.) and
                                            availability.</li>
                                        <li>Estimated delivery: <strong>15–20 working days</strong>.</li>
                                        <li>More than 4 pages will incur <strong>₹2,000 per extra page</strong>.</li>
                                        <li *ngIf="isIntroductionWebsite">More than 15 products will be charged
                                            <strong>₹1,000 for every 5–10
                                                additional
                                                products</strong>.</li>
                                        <li>1-Year Support will be provided only for the features developed during
                                            initial
                                            development. Any new feature requests will be charged separately.</li>
                                        <li *ngIf="isIntroductionWebsite">Payment Gateway and Shiprocket account
                                            creation must be done by the
                                            customer. A
                                            fully verified account for both must be provided within <strong>1
                                                month</strong>
                                            from the start of development.</li>
                                        <li>
                                            <strong>Payment & Refund Policy:</strong> Deal amount is final once
                                            confirmed. Advance
                                            payments are strictly
                                            non-refundable. Clients must read and agree before closing the deal.
                                        </li>
                                    </ul>
                                </div>
                            </section>
                        </div>
                        <p contenteditable="true" *ngIf="isAdrunVisible() && !isMetaAdsVisible()">Video will be delivered after 5-6 days of
                            Script finalization.</p>
                        <p contenteditable="true" *ngIf="isAdrunVisible() && !isMetaAdsVisible()">50% advance payment needed.</p>
                        <!-- <textarea class="bottom-txt"
                            rows="2" *ngIf="isAdrunVisible()">Video will be delivered after 5-6 days of Script finalization.</textarea>
                        <textarea class="bottom-txt" rows="2" *ngIf="isAdrunVisible()">50% advance payment needed.</textarea> -->
                        <ul class="terms-ul" *ngIf="!isMetaAdsVisible()">
                            <li *ngIf="isModelAvailabilityVisible() && isAdvertisementVideoVisible()">
                                <strong>Model Availability & Shoot Delay:</strong> Once a model is selected, Admix Media
                                is not responsible
                                for delays due to model’s personal/health issues. If unavailable for 7–10 days, the
                                client may select
                                another model in the same price segment.
                            </li>
                            <li *ngIf="isAdrunVisible()">
                                <strong>Delivery & Revision Timeline:</strong> Committed delivery date is for first
                                draft only. Revisions after
                                delivery require minimum 24 hours, not counted in the original deadline.
                            </li>
                            <li *ngIf="isAdrunVisible()">
                                <strong>Payment & Refund Policy:</strong> Deal amount is final once confirmed. Advance
                                payments are strictly
                                non-refundable. Clients must read and agree before closing the deal.
                            </li>
                            <li *ngIf="isModelAvailabilityVisible() && isAdvertisementVideoVisible()">
                                <strong>Reshoot Policy:</strong> Reshoot is not possible once the shoot is completed.
                                All requirements,
                                references, and approvals must be provided before the shoot date.
                            </li>
                            <li *ngIf="isAdrunVisible()">
                                <strong>Watermark Policy:</strong> After advance payment, videos/Logo/Graphics are
                                shared with
                                watermark. Final
                                watermark-free file is released only after full and final payment.
                            </li>
                            <li *ngIf="isModelAvailabilityVisible()">
                                <strong>Video Format Policy:</strong> Final video is delivered in one standard format.
                                Multiple
                                formats/resolutions require additional charges.
                            </li>
                            <li *ngIf="isModelAvailabilityVisible()">
                                <strong>Video Duration Policy:</strong> The quoted price is valid for videos up to 45
                                seconds. If the final video
                                exceeds 45 seconds but is within 1 minute, it will be considered under the same price.
                                If duration
                                exceeds 1 minute, the client must either shorten the script or pay additional charges.
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-3">
                    <div [formGroup]="invoiceForm">
                        <div class="sub-total">
                            <div class="sub-total-title">
                                <p><strong>Sub Total: </strong>₹{{this.amount}} </p>
                                <div class="d-flex align-items-center gap-2">
                                    <p class="mb-0"><strong>Discount:</strong></p>
                                    <input type="number" class="form-control discount" formControlName="discountValue"
                                        placeholder="Enter Discount">
                                </div>
                                <p *ngIf="invoiceForm.get('gstType')?.value === 'Other'"><strong>IGST
                                        &#64;18%:</strong>₹{{this.gstAmount}} </p>
                                <div *ngIf="invoiceForm.get('gstType')?.value !== 'Other'">
                                    <p><strong>SGST &#64;9%: </strong>₹{{this.gstAmount / 2}} </p>
                                    <p><strong>CGST &#64;9%: </strong>₹{{this.gstAmount / 2}} </p>
                                </div>

                                <p class="bottom-total"><strong>Total: </strong>₹ {{this.afterDiscountTotal}} </p>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <div class="row">
                <div class="col-lg-4">
                    <div class="qr-code" *ngIf="invoiceForm.get('billType')?.value === 'GST'">
                        <img src="assets/Images/GSTQR.jpeg" alt="AdMix Media QR Code">
                    </div>
                </div>
                <div class="col-lg-5">
                    <div class="details" *ngIf="invoiceForm.get('billType')?.value === 'GST'">
                        <h4>Pay To:</h4>
                        <p><strong>Bank Name:</strong> HDFC BANK, HATHRAS, UTTAR PRADESH</p>
                        <P><strong>Bank Account No:</strong> 50200088351070</P>
                        <p><strong>Bank IFSC Code:</strong> HDFC0006723</p>
                        <p><strong>Account holder's Name:</strong> Admix Media Pvt. Ltd.</p>
                        <p><strong>Account Type:</strong> Current Account</p>
                    </div>
                </div>
                <div class="col-lg-3">
                    <div class="signature">
                        <p> For: Admix Media Pvt. Ltd.</p>
                        <img src="assets/Images/signature.png" alt="Authorized Signature">
                        <p><strong>Authorized Signatory</strong></p>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <div class="footer">
                        <h6>Declaration</h6>
                        <ul>
                            <li>We declare that this invoice shows the actual price of the goods described and that all
                                particulars are true and correct.</li>
                            <li>This is a Computer Generated Invoice.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="invoice-container" *ngIf="isMetaAdsVisible()">
        <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12 col-12">
                <div class="card">
                    <header class="est-text">
                        <h3>Meta Ads Quotation</h3>
                    </header>
                    <!-- Performance Marketing (Meta Ads Only) — HTML snippet -->
                    <section class="pm-card" *ngIf="!isMetaAdsPremium">
                        <header
                            style="display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:12px;">
                            <h2 style="margin:0;font-size:1.25rem;">Performance Marketing (Meta Ads Only)</h2>
                            <div style="font-weight:700;font-size:1rem;color:#111;" contenteditable="true">₹8,000 / Month</div>
                        </header>

                        <p style="margin:0 0 12px 0;color:#333;" contenteditable="true">
                            <strong>Max spend:</strong> ₹1,00,000 / Month
                        </p>

                        <ul style="margin:0 0 12px 18px;color:#333;line-height:1.5;">
                            <li contenteditable="true">Meta Ads: Web Traffic, Web Signups &amp; Re-marketing</li>
                            <li contenteditable="true">Geo-targeted ads for visibility in high-intent regions (Local Ads)</li>
                            <li contenteditable="true">Meta Ads: Web Traffic, Web Purchases &amp; Re-marketing</li>
                            <li contenteditable="true">Meta Pixel, Google Analytics &amp; event tracking setup</li>
                            <li contenteditable="true">Retargeting past visitors, ad clickers, purchasers, add to cart, checkout initiate, etc.</li>
                            <li contenteditable="true">Proper targeting of quality audience to reduce RTO</li>
                            <li contenteditable="true">Generate quality leads which lead to sales</li>
                        </ul>

                        <div
                            style="margin:14px 0;padding:12px;background:#fafafa;border-radius:6px;border:1px solid #f0f0f0;">
                            <p style="margin:0 0 8px 0;font-weight:600;">One Time Setup Fee</p>
                            <div style="font-size:1.05rem;font-weight:700;" contenteditable="true">₹5,000</div>
                        </div>

                        <div style="margin-bottom:12px;">
                            <h3 style="margin:0 0 6px 0;font-size:1rem;">After ₹1,00,000 a flat 10% of ad spent will be charged extra.</h3>
                            <ul style="margin:6px 0 0 18px;color:#333;line-height:1.5;">
                                <li contenteditable="true">
                                    <strong>Monthly Reporting:</strong> Actionable insights into campaign performance
                                    with improvement strategies.
                                    <small style="display:block;color:#666;">(3 days reporting if a new ad account owned
                                        by us is provided)</small>
                                </li>
                                <li contenteditable="true"><strong>Dedicated Account Manager:</strong> A single point of contact to ensure
                                    smooth communication and execution.</li>
                            </ul>
                        </div>

                        <div style="margin-top:14px;border-top:1px dashed #eee;padding-top:12px;color:#222;">
                            <p style="margin:0 0 8px 0;font-weight:600;">Let’s take your business to new digital
                                heights! 🌍✈️</p>
                        </div>

                        <footer style="margin-top:14px;color:#666;font-size:0.9rem;">
                            <p style="margin:0;">Looking forward to collaborating with you!</p>
                        </footer>
                    </section>

                    <section class="pm-card" *ngIf="isMetaAdsPremium"
                        style="max-width:800px;margin:16px auto;padding:18px;border:1px solid #e6e6e6;border-radius:8px;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial;">
                        <header
                            style="display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:12px;">
                            <h2 style="margin:0;font-size:1.25rem;">Performance Marketing (Meta Ads Only)</h2>
                            <div style="font-weight:700;font-size:1rem;color:#111;" contenteditable="true">₹3,000 / Month</div>
                        </header>

                        <p style="margin:0 0 12px 0;color:#333;" contenteditable="true">
                            <strong>Max spend:</strong> ₹30,000 / Month
                        </p>

                        <ul style="margin:0 0 12px 18px;color:#333;line-height:1.5;">
                            <li contenteditable="true">Meta Ads: Web Traffic, Web Signups &amp; Re-marketing</li>
                            <li contenteditable="true">Geo-targeted ads for visibility in high-intent regions (Local Ads)</li>
                            <li contenteditable="true">Meta Ads: Web Traffic, Web Purchases &amp; Re-marketing</li>
                            <li contenteditable="true">Meta Pixel, Google Analytics &amp; event tracking setup</li>
                            <li contenteditable="true">Retargeting past visitors, ad clickers, purchasers, add to cart, checkout initiate, etc.</li>
                            <li contenteditable="true">Proper targeting of quality audience to reduce RTO</li>
                            <li contenteditable="true">Generate quality leads which lead to sales</li>
                        </ul>

                        <div
                            style="margin:14px 0;padding:12px;background:#fafafa;border-radius:6px;border:1px solid #f0f0f0;">
                            <p style="margin:0 0 8px 0;font-weight:600;">One Time Setup Fee</p>
                            <div style="font-size:1.05rem;font-weight:700;" contenteditable="true">₹3,000</div>
                        </div>

                        <div style="margin-bottom:12px;">
                            <h3 style="margin:0 0 6px 0;font-size:1rem;">Bonus Services — <span
                                    style="font-weight:600">FREE</span></h3>
                            <ul style="margin:6px 0 0 18px;color:#333;line-height:1.5;">
                                <li contenteditable="true">
                                    <strong>Monthly Reporting:</strong> Actionable insights into campaign performance
                                    with improvement strategies.
                                    <small style="display:block;color:#666;">(3 days reporting if a new ad account owned
                                        by us is provided)</small>
                                </li>
                                <li contenteditable="true"><strong>Dedicated Account Manager:</strong> A single point of contact to ensure
                                    smooth communication and execution.</li>
                            </ul>
                        </div>

                        <div style="margin-top:14px;border-top:1px dashed #eee;padding-top:12px;color:#222;">
                            <p style="margin:0 0 8px 0;font-weight:600;">Let’s take your business to new digital
                                heights! 🌍✈️</p>
                        </div>

                        <footer style="margin-top:14px;color:#666;font-size:0.9rem;">
                            <p style="margin:0;">Looking forward to collaborating with you!</p>
                        </footer>
                    </section>
                </div>
            </div>
        </div>
    </div>
</div>